<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.74">
<link rel="alternate" type="application/rss+xml" href="/json-logic-engine/blog/rss.xml" title="JSON Logic Engine Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/json-logic-engine/blog/atom.xml" title="JSON Logic Engine Blog Atom Feed"><title data-react-helmet="true">Adding Methods | JSON Logic Engine</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Adding Methods | JSON Logic Engine"><meta data-react-helmet="true" name="description" content="Adding Methods"><meta data-react-helmet="true" property="og:description" content="Adding Methods"><meta data-react-helmet="true" property="og:url" content="https://jessemitchell.me/json-logic-engine/docs/methods"><link data-react-helmet="true" rel="shortcut icon" href="/json-logic-engine/img/favicon.ico"><link rel="stylesheet" href="/json-logic-engine/assets/css/styles.3abd4778.css">
<link rel="preload" href="/json-logic-engine/assets/js/styles.be28d2f2.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/runtime~main.e6eb78a4.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/main.189e81ec.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/common.969ae10b.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/1.ff02fea4.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/3.302cd05a.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/1be78505.4f32adcc.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/24.d0b5c865.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/935f2afb.9fc51c99.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/23.f37cb294.js" as="script">
<link rel="preload" href="/json-logic-engine/assets/js/fa18daf4.258180a0.js" as="script">
</head>
<body>
<div id="__docusaurus">
<div class="container-fluid vh-100 vw-100 row m-0 p-0"><nav class="container-fluid mb-auto navbar navbar-expand-md navbar-light bg-light"><a href="/json-logic-engine/"><img width="50" height="50" style="max-width:100%" src="/json-logic-engine/img/logo.svg" alt="JSON Logic Engine"><span class="ml-2">JSON Logic Engine</span></a><button aria-label="Toggle navigation" type="button" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div class="justify-content-between collapse navbar-collapse"><ul class="navbar-nav"><li class="nav-item"><a aria-current="page" class="nav-link nav-link text-info" position="left" href="/json-logic-engine/docs/">Docs</a></li></ul><ul class="navbar-nav"><li class="nav-item"><a href="https://github.com/TotalTechGeek/json-logic-engine" target="_blank" rel="noopener noreferrer" class="nav-link" position="right">GitHub</a></li></ul></div></nav><div class="container-fluid px-0 d-inline-flex flex-row"><div class="d-flex vh-100"><div role="complementary"><div class="bg-info sidebar_3MET"><div class="text-white"><div class="d-flex w-100 justify-content-end mr-5"><button type="button" class="mr-2 sidebarFAB_3hKm btn btn-secondary"><svg aria-label="Menu" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div><div class="sideMenu_3wZF"><ul class="list-unstyled p-3 mr-auto nav flex-column"><div><h4 class="ml-2">Discussion</h4><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/">Installation and Setup</a></li><li class="nav-item"><a aria-current="page" class="sidebar-item m-4 text-white active" href="/json-logic-engine/docs/methods">Adding Methods</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/async">Asynchronous Engine</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/doc2">Blazing Fast via Compilation</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/doc3">Differences from json-logic-js</a></li></div><div><h4 class="ml-2">Default Operations</h4><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/math">Math Operators</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/logic">Logic Operators</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/string">String Operators</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/array">Array Operators</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/misc">Miscellaneous Operators</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/context">Context Operators</a></li><li class="nav-item"><a class="sidebar-item m-4 text-white" href="/json-logic-engine/docs/higher">Higher Order Operators</a></li></div></ul></div></div></div></div><main class="w-100 align-items-center overflow-auto p-5"><main class="col col-md-8 p-0"><h2 class="h2 my-3" id="adding-methods">Adding Methods</h2><div class="font-weight-light">While the default methods support a lot of common functionality, to make the logic engine useful within your domain &amp; give it the ability to interact with your platform, the module has tried to make it simple to add new commands into the framework.</div><br><pre><pre class="language-js" style="color:#d6deeb;background-color:#011627;padding:20px"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> engine </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">LogicEngine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token parameter">name</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token template-string string" style="color:rgb(173, 219, 103)">Hello, </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(173, 219, 103)">!</span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> f </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;hello&#x27;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;json-logic-engine&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Hello, json-logic-engine!</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><div class="font-weight-light">Let&#x27;s use a less silly example,</div><br><pre><pre class="language-js" style="color:#d6deeb;background-color:#011627;padding:20px"><div class="token-line" style="color:#d6deeb"><span class="token plain">engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;repeat&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token parameter">str</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> times</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">repeat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">times</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> g </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;cat&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;repeat&#x27;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27; Batman&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Na&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// NaNaNaNaNaNaNa Batman </span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h3 class="h3 my-3" id="adding-a-whole-library">Adding a whole library</h3><div class="font-weight-light">If you would like to import a whole library, you may call <code>addModule</code> to do so.</div><pre><pre class="language-js" style="color:#d6deeb;background-color:#011627;padding:20px"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// imports all of the methods from Math (the annotations are explained below, and can be left off. They can help optimize your logic though.)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Math&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Math</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> deterministic</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sync</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> j </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Math.sqrt&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Math.round&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">25.3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//? prints 5</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><h4 class="h4 my-3" id="additional-flexibility">Additional Flexibility</h4><div class="font-weight-light">This section is only for really niche edge cases, I don&#x27;t expect it to benefit most users.</div><br><div class="font-weight-light">If you need more capability than executing a function, like hijacking the traversal of the input or accessing context, it is possible to do so. </div><div class="font-weight-light">You can disable the automatic traversal of the input by using <code>traverse: false</code>, this can be useful if you want to preserve the input for things like defining your own control structures.</div><pre><pre class="language-js" style="color:#d6deeb;background-color:#011627;padding:20px"><div class="token-line" style="color:#d6deeb"><span class="token plain">engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;repeatObj&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">   traverse</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">   </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">method</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token parameter">obj</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> times</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">       </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">repeat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">times</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> h </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;repeatObj&#x27;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">h</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// prints &quot;{&quot;var&quot;:&quot;a&quot;}{&quot;var&quot;:&quot;a&quot;}{&quot;var&quot;:&quot;a&quot;}{&quot;var&quot;:&quot;a&quot;}{&quot;var&quot;:&quot;a&quot;}&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><div class="font-weight-light">You can also specify an alternate <code>asyncMethod</code> in case for whatever reason a particular function would not function the same in an asynchronous environment (like if you&#x27;re making calls to <code>engine.run</code>).</div><br><div class="font-weight-light">Your method can have the following signature:
<code>(input, context, above, engine) =&gt; {}</code></div><br><table class="table"><thead><tr><th>Params</th><th>Explanation</th></tr></thead><tbody><tr><td>input</td><td>Whatever data is passed into the function. If traversal is disabled, this&#x27;ll be the raw input.</td></tr><tr><td>context</td><td>The current &quot;context&quot; for the run-time. This can be either whatever the function is invoked with, or the context set by a higher order operator (map, reduce, etc.)</td></tr><tr><td>above</td><td>Whenever a higher order operator is invoked, it pushes the current context to an array.  This is what allows the handlebars style traversal, so you can access values from outside of the current context.</td></tr><tr><td>engine</td><td>The current engine powering this call, this is really useful for when you&#x27;re building custom control structures and want to invoke <code>engine.run</code> or similar.</td></tr></tbody></table><blockquote class="blockquote-footer"><div class="font-weight-light">Be aware that if you write your function to access context, you should add <code>useContext: true</code> to your function object configuration. This is used by the compilation mechanism.</div></blockquote><hr><h4 class="h4 my-3" id="assisting-the-engine">Assisting the Engine</h4><div class="font-weight-light">It is possible to inform the engine of things it could use to try to optimize itself during &quot;compilation&quot;. If your function has no side-effects, you can flag it as deterministic by passing in an additional parameter <br><br></div><pre><pre class="language-js" style="color:#d6deeb;background-color:#011627;padding:20px"><div class="token-line" style="color:#d6deeb"><span class="token plain">engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;repeat&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token parameter">str</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> times</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">repeat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">times</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> deterministic</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><div class="font-weight-light">This will allow it to evaluate whether the input to this function is also deterministic, and pre-compute the result for the generated function.</div><br><div class="font-weight-light">Alternatively, if you use the advanced object syntax for adding a function, you can make <code>determistic</code> a function, this is particularly useful if you&#x27;ve turned off automatic traversal.</div><br><div class="font-weight-light">Additionally, if you are using the <code>AsyncLogicEngine</code> class, if a particular function is fully synchronous, you may pass in <code>sync: true</code> as an annotation well.</div><pre><pre class="language-js" style="color:#d6deeb;background-color:#011627;padding:20px"><div class="token-line" style="color:#d6deeb"><span class="token plain">engine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;repeat&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token parameter">str</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> times</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">repeat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">times</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> deterministic</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sync</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><div class="font-weight-light">This will allow the engine to more efficiently compose your custom functions together for optimal-performance.</div><nav aria-label="Doc list page navigation" class="my-5 p-0"><ul class="pagination justify-content-between"><li class="page-item mr-2"><a class="page-link" href="/json-logic-engine/docs/">« Installation and Setup</a></li><li class="page-item ml-2"><a class="page-link" href="/json-logic-engine/docs/async">Asynchronous Engine »</a></li></ul></nav></main></main></div></div><footer class="container-fluid p-0 align-self-end"><div class="row bg-light no-gutters justify-content-center"><div class="col col-xs-1 col-xl-1 mx-4 my-4"><h5>Related</h5><ul class="list-unstyled"><li class="mb-1"><a href="https://github.com/TotalTechGeek" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></footer></div></div>
<script src="/json-logic-engine/assets/js/styles.be28d2f2.js"></script>
<script src="/json-logic-engine/assets/js/runtime~main.e6eb78a4.js"></script>
<script src="/json-logic-engine/assets/js/main.189e81ec.js"></script>
<script src="/json-logic-engine/assets/js/common.969ae10b.js"></script>
<script src="/json-logic-engine/assets/js/1.ff02fea4.js"></script>
<script src="/json-logic-engine/assets/js/3.302cd05a.js"></script>
<script src="/json-logic-engine/assets/js/1be78505.4f32adcc.js"></script>
<script src="/json-logic-engine/assets/js/24.d0b5c865.js"></script>
<script src="/json-logic-engine/assets/js/935f2afb.9fc51c99.js"></script>
<script src="/json-logic-engine/assets/js/23.f37cb294.js"></script>
<script src="/json-logic-engine/assets/js/fa18daf4.258180a0.js"></script>
</body>
</html>